!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(){window.app=new o["default"]}var r=i(1),o=n(r);document.addEventListener("DOMContentLoaded",a)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),o=n(r),s=function u(){function e(e){e.preventDefault(),this.links.video=t+this.form.querySelector('[name="video"]').value,this.links.subtitles=t+this.form.querySelector('[name="subtitles"]').value,this.links.audio=t+this.form.querySelector('[name="audio"]').value,this.pages.pageForm.classList.add("page_hidden"),this.pages.pagePreloader.classList.remove("page_hidden"),this.pages.player=new o["default"](this.links,this.pages)}a(this,u);var t="http://cors.io/?u=";this.form=document.querySelector(".panel__form"),this.pages={pageForm:document.querySelector(".page_content_form"),pagePreloader:document.querySelector(".page_content_preloader"),pagePlayer:document.querySelector(".page_content_player")},this.links={video:"",subtitles:"",audio:""},this.form.addEventListener("submit",e.bind(this))};t["default"]=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(3),s=n(o),u=i(5),l=n(u),d=i(4),c=n(d),f=function(){function e(t,i){function n(e,t){function i(e,t,i){var n=f.createProgram(),a="attribute vec2 coordinates;attribute vec2 texture_coordinates;varying vec2 v_texcoord;void main() {  gl_Position = vec4(coordinates, 0.0, 1.0);  v_texcoord = texture_coordinates;}",r=f.createShader(f.VERTEX_SHADER);f.shaderSource(r,a),f.compileShader(r);var o="precision mediump float;varying vec2 v_texcoord;uniform sampler2D u_texture;uniform float u_time;uniform vec2 u_resolution;vec2 uv;vec3 grayscale (vec3 color) {   return vec3(0.2126*color.r + 0.7152*color.g + 0.0722*color.b);}float rand(vec2 co){   return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);}float rand(float c){   return rand(vec2(c,1.0));}float randomLine(float seed){   float b = 0.01 * rand(seed);   float a = rand(seed+1.0);   float c = rand(seed+2.0) - 0.5;   float mu = rand(seed+3.0);   float l = 1.0;   if ( mu > 0.2)   l = pow(  abs(a * uv.x + b * uv.y + c ), 1.0/8.0 );   else   l = 2.0 - pow( abs(a * uv.x + b * uv.y + c), 1.0/8.0 );   return mix(0.5, 1.0, l);}float randomBlotch(float seed){\t  float x = rand(seed);\t  float y = rand(seed+1.0);\t  float s = 0.01 * rand(seed+2.0);\t  vec2 p = vec2(x,y) - uv;\t  p.x *= u_resolution.x / u_resolution.y;\t  float a = atan(p.y,p.x);\t  float v = 1.0;\t  float ss = s*s * (sin(6.2831*a*x)*0.1 + 1.0);\t  if ( dot(p,p) < ss ) v = 0.2;\t  else\t\tv = pow(dot(p,p) - ss, 1.0/16.0);   return mix(0.3 + 0.2 * (1.0 - (s / 0.02)), 1.0, v);}void main() {   uv = v_texcoord.xy;   float t = float(int(u_time * 20.0));   vec3 image = texture2D(u_texture, uv).rgb;   float luma = dot( vec3(0.2126, 0.7152, 0.0722), image );   image = luma * vec3(0.7, 0.7, 0.7);   float vI = 16.0 * (uv.x * (1.0-uv.x) * uv.y * (1.0-uv.y));vI *= mix( 0.7, 1.0, rand(t + 0.5));vI += 1.0 + 0.4 * rand(t+8.);vI *= pow(16.0 * uv.x * (1.0-uv.x) * uv.y * (1.0-uv.y), 0.4);int l = int(8.0 * rand(t+7.0));if ( 0 < l ) vI *= randomLine( t+6.0+17.* float(0));if ( 1 < l ) vI *= randomLine( t+6.0+17.* float(1));if ( 2 < l ) vI *= randomLine( t+6.0+17.* float(2));if ( 3 < l ) vI *= randomLine( t+6.0+17.* float(3));if ( 4 < l ) vI *= randomLine( t+6.0+17.* float(4));if ( 5 < l ) vI *= randomLine( t+6.0+17.* float(5));if ( 6 < l ) vI *= randomLine( t+6.0+17.* float(6));if ( 7 < l ) vI *= randomLine( t+6.0+17.* float(7));image = image * vI;gl_FragColor = vec4(image, 1.0);   gl_FragColor.xyz *= (1.0+(rand(uv+t*.01)-.2)*.15);\t}",s=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(s,o),f.compileShader(s),f.attachShader(n,r),f.attachShader(n,s),f.linkProgram(n),f.useProgram(n);var u=f.getAttribLocation(n,"coordinates"),l=f.getAttribLocation(n,"texture_coordinates");h=f.getUniformLocation(n,"u_time");var d=f.getUniformLocation(n,"u_resolution");f.uniform2f(d,c.width,c.height);var v=f.createBuffer(),p=[-1,-1,1,-1,-1,1,-1,1,1,-1,1,1];f.bindBuffer(f.ARRAY_BUFFER,v),f.bufferData(f.ARRAY_BUFFER,new Float32Array(p),f.STATIC_DRAW),f.enableVertexAttribArray(u),f.vertexAttribPointer(u,2,f.FLOAT,!1,0,0),v=f.createBuffer();var m=[0,1,1,1,0,0,0,0,1,1,1,0];f.bindBuffer(f.ARRAY_BUFFER,v),f.bufferData(f.ARRAY_BUFFER,new Float32Array(m),f.STATIC_DRAW),f.enableVertexAttribArray(l),f.vertexAttribPointer(l,2,f.FLOAT,!1,0,0);var g=f.createTexture();f.bindTexture(f.TEXTURE_2D,g),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST)}function n(e){if(!this.video.videoElement.ended){d.drawImage(this.video.videoElement,0,0,l.width,l.height),r.call(this),void 0===e&&(e=0);var t=e-this.previousTime;this.previousTime=e,a(t),requestAnimationFrame(n.bind(this))}}function a(e){v+=e,f.uniform1f(h,v/1e3),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,l),f.viewport(0,0,c.width,c.height),f.enable(f.DEPTH_TEST),f.clear(f.COLOR_BUFFER_BIT),f.drawArrays(f.TRIANGLES,0,6)}function r(){this.subtitles.index!==this.subtitles.data.length&&this.video.videoElement.currentTime>=this.subtitles.data[this.subtitles.index].endTime&&(this.subtitles.flag||(this.video.pause(),o.call(this,3e3),this.subtitles.flag=!0),s(this.subtitles.data[this.subtitles.index].text))}function o(e){var t=this;setTimeout(function(){return t.subtitles.flag=!1,!t.pauseFlag&&(t.video.play(),void t.subtitles.index++)},3e3)}function s(e){var t=l.width/100*3;d.fillStyle="#000000",d.fillRect(0,0,l.width,l.height),d.fillStyle="#D8D8D8",d.font=t+"px Oranienbaum",d.textBaseline="middle",d.textAlign="center",u(e,t)}function u(e,t){var i=e.split("\n");i.forEach(function(e,i){d.fillText(e,l.width/2,l.height/2+i*t)})}var l=document.getElementById("canvas"),d=l.getContext("2d"),c=document.getElementById("webgl-canvas"),f=c.getContext("webgl")||c.getContext("experimental-webgl");c.width=l.width=e,c.height=l.height=t;var v=0,h=null;i.call(this),this.play(),n.call(this)}var r=this;a(this,e),this.pagePlayer=i.pagePlayer,this.pagePreloader=i.pagePreloader,this.player=this.pagePlayer.querySelector(".player"),this.playButton=this.player.querySelector(".player__button_function_play"),this.pauseButton=this.player.querySelector(".player__button_function_pause"),this.video=new l["default"](t.video,this.pagePlayer),this.song=new s["default"](t.audio),this.subtitles=new c["default"](t.subtitles),this.previousTime=0,this.pauseFlag=!0,this.video.videoElement.addEventListener("canplaythrough",function(){r.pagePlayer.classList.remove("page_hidden"),r.pagePreloader.classList.add("page_hidden"),n.call(r,r.video.videoElement.videoWidth,r.video.videoElement.videoHeight)}),this.playButton.addEventListener("click",function(){r.play()}),this.pauseButton.addEventListener("click",function(){r.pause()})}return r(e,[{key:"play",value:function(){this.pauseFlag=!1,this.playButton.classList.add("player__button_hidden"),this.pauseButton.classList.remove("player__button_hidden"),this.video.play(),this.song.play()}},{key:"pause",value:function(){this.pauseFlag=!0,this.pauseButton.classList.add("player__button_hidden"),this.playButton.classList.remove("player__button_hidden"),this.video.pause(),this.song.pause()}}]),e}();t["default"]=f},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t){i(this,e),this.link=t,this.audio=new Audio(t),this.audio.crossOrigin="anonymous",this.context=new(window.AudioContext||window.webkitAudioContext),this.source=this.context.createMediaElementSource(this.audio),this.gainNode=this.context.createGain(),this.addDirtyEffects()}return n(e,[{key:"addDirtyEffects",value:function(){var e=this.context.createWaveShaper(),t=this.context.createBiquadFilter();t.type="lowpass",t.frequency.value=1e3,t.gain.value=20,this.source.connect(e),e.connect(t),this.generateWHiteNoize(),this.source.connect(this.gainNode),t.connect(this.context.destination)}},{key:"generateWHiteNoize",value:function(){var e=this.context.createScriptProcessor(1024,1,1);e.onaudioprocess=function(e){for(var t=e.outputBuffer.getChannelData(0),i=0;i<t.length;i++)t[i]=Math.random()},e.connect(this.gainNode)}},{key:"play",value:function(){this.audio.play(),this.gainNode.connect(this.context.destination)}},{key:"pause",value:function(){this.audio.pause(),this.gainNode.disconnect()}}]),e}();t["default"]=a},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(6),s=n(o),u=function(){function e(t){function i(){var e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),200===e.status)return s["default"].fromSrt(e.response)}a(this,e),this.link=t,this.data=i(),this.parseData(),this.index=0,this.flag=!1}return r(e,[{key:"parseData",value:function(){function e(e){e=e.replace(/,/g,".");var t=60*e.slice(0,2),i=60*(t+Number(e.slice(3,5))),n=i+Number(e.slice(6,12));return n}this.data.forEach(function(t){t.startTime=e(t.startTime),t.endTime=e(t.endTime)})}}]),e}();t["default"]=u},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,n){i(this,e),this.videoElement=document.createElement("video"),this.videoElement.setAttribute("crossorigin","anonymous"),this.videoDiv=document.createElement("div"),n.appendChild(this.videoDiv),this.videoDiv.appendChild(this.videoElement),this.videoDiv.setAttribute("style","display:none;"),this.videoElement.setAttribute("src",t),this.videoElement.muted=!0}return n(e,[{key:"play",value:function(){this.videoElement.play()}},{key:"pause",value:function(){this.videoElement.pause()}}]),e}();t["default"]=a},function(e,t,i){var n=function(){var e={};e.fromSrt=function(e,i){var n=!!i;e=e.replace(/\r/g,"");var a=/(\d+)\n(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})/g;e=e.split(a),e.shift();for(var r=[],o=0;o<e.length;o+=4)r.push({id:e[o].trim(),startTime:n?t(e[o+1].trim()):e[o+1].trim(),endTime:n?t(e[o+2].trim()):e[o+2].trim(),text:e[o+3].trim()});return r},e.toSrt=function(e){if(!e instanceof Array)return"";for(var t="",n=0;n<e.length;n++){var a=e[n];isNaN(a.startTime)||isNaN(a.endTime)||(a.startTime=i(parseInt(a.startTime,10)),a.endTime=i(parseInt(a.endTime,10))),t+=a.id+"\r\n",t+=a.startTime+" --> "+a.endTime+"\r\n",t+=a.text.replace("\n","\r\n")+"\r\n\r\n"}return t};var t=function(e){var t=/(\d+):(\d{2}):(\d{2}),(\d{3})/,i=t.exec(e);if(null===i)return 0;for(var n=1;n<5;n++)i[n]=parseInt(i[n],10),isNaN(i[n])&&(i[n]=0);return 36e5*i[1]+6e4*i[2]+1e3*i[3]+i[4]},i=function(e){var t=[36e5,6e4,1e3],i=[];for(var n in t){var a=(e/t[n]>>0).toString();a.length<2&&(a="0"+a),e%=t[n],i.push(a)}var r=e.toString();if(r.length<3)for(n=0;n<=3-r.length;n++)r="0"+r;return i.join(":")+","+r};return e}();e.exports=n}]);
//# sourceMappingURL=bundle.js.map