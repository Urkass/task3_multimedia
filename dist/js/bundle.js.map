{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 957ed15e5b8d8758f5d7","webpack:///./src/js/index.js","webpack:///./src/js/app.js","webpack:///./src/js/player.js","webpack:///./src/js/song.js","webpack:///./src/js/subtitles.js","webpack:///./src/js/video.js","webpack:///./~/subtitles-parser/index.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","onDOMContentLoaded","window","app","_app2","_app","document","addEventListener","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_player","_player2","App","onFormSubmit","e","preventDefault","this","links","video","crossorigin","form","querySelector","subtitles","audio","pagePlayer","classList","remove","pageForm","add","player","bind","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_song","_song2","_video","_video2","_subtitles","_subtitles2","Player","initCanvas","videoWidth","videoHeight","drawScreen","context","drawImage","videoElement","checkForSubtitles","addGrayScale","currentTime","data","index","endTime","flag","pause","timerForSubtitles","drawSubtitlesPicture","text","delay","_this2","setTimeout","console","log","play","fillStyle","fillRect","theCanvas","width","height","font","textBaseline","textAlign","fillText","idata","getImageData","r","g","b","brightness","set","putImageData","gameLoop","getElementById","getContext","_this","playButton","stopButton","song","Song","link","Audio","_subtitlesParser","_subtitlesParser2","Subtitles","getFile","xhr","XMLHttpRequest","open","send","status","fromSrt","response","parseData","countSeconds","time","replace","hours","slice","minutes","Number","seconds","forEach","elem","startTime","Video","createElement","setAttribute","videoDiv","appendChild","muted","parser","pItems","ms","useMs","regex","split","shift","items","push","trim","timeMs","toSrt","Array","res","s","isNaN","msTime","parseInt","val","parts","exec","measures","toString","join"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _app = __webpack_require__(1);\n\t\n\tvar _app2 = _interopRequireDefault(_app);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tdocument.addEventListener('DOMContentLoaded', onDOMContentLoaded); // import {calc} from './calc';\n\t\n\t\n\tfunction onDOMContentLoaded() {\n\t    window.app = new _app2.default();\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _player = __webpack_require__(2);\n\t\n\tvar _player2 = _interopRequireDefault(_player);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar App = function App() {\n\t    _classCallCheck(this, App);\n\t\n\t    var crossorigin = 'http://cors.io/?u=';\n\t    this.form = document.querySelector('.panel__form');\n\t    this.pageForm = document.querySelector('.page_content_form');\n\t    this.pagePlayer = document.querySelector('.page_content_player');\n\t\n\t    this.links = {\n\t        video: '',\n\t        subtitles: '',\n\t        audio: ''\n\t    };\n\t\n\t    this.form.addEventListener('submit', onFormSubmit.bind(this));\n\t\n\t    function onFormSubmit(e) {\n\t        e.preventDefault();\n\t\n\t        this.links.video = crossorigin + this.form.querySelector('[name=\"video\"]').value;\n\t        this.links.subtitles = crossorigin + this.form.querySelector('[name=\"subtitles\"]').value;\n\t        this.links.audio = crossorigin + this.form.querySelector('[name=\"audio\"]').value;\n\t\n\t        this.pagePlayer.classList.remove('page_hidden');\n\t        this.pageForm.classList.add('page_hidden');\n\t        this.player = new _player2.default(this.links, this.pagePlayer);\n\t    }\n\t};\n\t\n\texports.default = App;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _song = __webpack_require__(3);\n\t\n\tvar _song2 = _interopRequireDefault(_song);\n\t\n\tvar _video = __webpack_require__(5);\n\t\n\tvar _video2 = _interopRequireDefault(_video);\n\t\n\tvar _subtitles = __webpack_require__(4);\n\t\n\tvar _subtitles2 = _interopRequireDefault(_subtitles);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Player = function () {\n\t    function Player(links, pagePlayer) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, Player);\n\t\n\t        // this.links = links;\n\t        this.pagePlayer = pagePlayer;\n\t        this.player = pagePlayer.querySelector('.player');\n\t        this.playButton = this.player.querySelector('.player__play');\n\t        this.stopButton = this.player.querySelector('.player__stop');\n\t        this.video = new _video2.default(links, this.pagePlayer);\n\t        this.song = new _song2.default(links.audio);\n\t        this.subtitles = new _subtitles2.default(links.subtitles);\n\t        // console.log(`${this.video.videoElement.videoWidth}:${this.video.videoElement.videoHeight}`);\n\t        this.video.videoElement.addEventListener('canplaythrough', function () {\n\t            initCanvas.call(_this, _this.video.videoElement.videoWidth, _this.video.videoElement.videoHeight);\n\t        });\n\t        this.playButton.addEventListener('click', function () {\n\t            _this.play();\n\t        });\n\t        this.stopButton.addEventListener('click', function () {\n\t            _this.pause();\n\t        });\n\t\n\t        function initCanvas(videoWidth, videoHeight) {\n\t            var theCanvas = document.getElementById('canvasOne');\n\t            var context = theCanvas.getContext('2d');\n\t            theCanvas.width = videoWidth;\n\t            theCanvas.height = videoHeight;\n\t\n\t            this.play();\n\t\n\t            function drawScreen() {\n\t                // if (this.video.videoElement.paused || this.video.videoElement.ended) {\n\t                //     return false;\n\t                // }\n\t                context.drawImage(this.video.videoElement, 0, 0);\n\t                checkForSubtitles.call(this);\n\t                addGrayScale();\n\t            }\n\t\n\t            function checkForSubtitles() {\n\t                // let conditionLess;\n\t                // if (this.subtitles.flag) {\n\t                //     conditionLess = false;\n\t                // } else {\n\t                //     conditionLess = this.video.videoElement.currentTime <= this.subtitles.data[this.subtitles.index].endTime;\n\t                // }\n\t                // // let conditionLess = this.video.videoElement.currentTime <= this.subtitles.data[this.subtitles.index].endTime;\n\t                // let conditionMore = this.video.videoElement.currentTime >= this.subtitles.data[this.subtitles.index].startTime;\n\t                // if (conditionLess && conditionMore) {\n\t                //     drawSubtitlesPicture();\n\t                //     this.video.pause();\n\t                // } else if (conditionLess === false && conditionMore) {\n\t                //     this.video.play();\n\t                //     this.subtitles.index++;\n\t                // }\n\t                //\n\t                // console.log(this.subtitles.data[this.subtitles.index].endTime);\n\t                if (this.video.videoElement.currentTime >= this.subtitles.data[this.subtitles.index].endTime) {\n\t                    if (!this.subtitles.flag) {\n\t                        this.video.pause();\n\t                        timerForSubtitles.call(this, 3000);\n\t                        this.subtitles.flag = true;\n\t                    }\n\t                    drawSubtitlesPicture(this.subtitles.data[this.subtitles.index].text);\n\t                    // console.log(this.video.videoElement.currentTime);\n\t                }\n\t            }\n\t\n\t            function timerForSubtitles(delay) {\n\t                var _this2 = this;\n\t\n\t                setTimeout(function () {\n\t                    console.log('CHANGE');\n\t                    _this2.video.play();\n\t                    _this2.subtitles.flag = false;\n\t                    _this2.subtitles.index++;\n\t                }, 3000);\n\t            }\n\t\n\t            function drawSubtitlesPicture(text) {\n\t                context.fillStyle = '#000000';\n\t                context.fillRect(0, 0, theCanvas.width, theCanvas.height);\n\t                context.fillStyle = 'white';\n\t                context.font = '50px Oranienbaum';\n\t                context.textBaseline = 'middle';\n\t                context.textAlign = \"center\";\n\t                context.fillText(text, theCanvas.width / 2, theCanvas.height / 2);\n\t            }\n\t\n\t            function addGrayScale() {\n\t                // First, draw it into the backing canvas\n\t                // Grab the pixel data from the backing canvas\n\t                var idata = context.getImageData(0, 0, theCanvas.width, theCanvas.height);\n\t                var data = idata.data;\n\t                // Loop through the pixels, turning them grayscale\n\t                for (var i = 0; i < data.length; i += 4) {\n\t                    var r = data[i];\n\t                    var g = data[i + 1];\n\t                    var b = data[i + 2];\n\t                    var brightness = 3 * r + 4 * g + b >>> 3;\n\t                    data[i] = brightness;\n\t                    data[i + 1] = brightness;\n\t                    data[i + 2] = brightness;\n\t                }\n\t                idata.data.set(data);\n\t                // Draw the pixels onto the visible canvas\n\t                context.putImageData(idata, 0, 0);\n\t                // Start over!// First, draw it into the backing canvas\n\t\n\t                // Step 5: Apply scratches\n\t                // if (RandomValue & lt; ScratchValue) {\n\t                //     // Pick a random spot to show scratches\n\t                //     float dist = 1.0 / ScratchValue;\n\t                //     float d = distance(vUv, vec2(RandomValue * dist, RandomValue * dist));\n\t                //     if (d & lt; 0.4) {\n\t                //         // Generate the scratch\n\t                //         float xPeriod = 8.0;\n\t                //         float yPeriod = 1.0;\n\t                //         float pi = 3.141592;\n\t                //         float phase = TimeLapse;\n\t                //         float turbulence = snoise(vUv * 2.5);\n\t                //         float vScratch = 0.5 + (sin(((vUv.x * xPeriod + vUv.y * yPeriod + turbulence)) * pi + phase) * 0.5);\n\t                //         vScratch = clamp((vScratch * 10000.0) + 0.35, 0.0, 1.0);\n\t                //\n\t                //         finalColour.xyz *= vScratch;\n\t                //     }\n\t                // }\n\t            }\n\t\n\t            function gameLoop() {\n\t                window.setTimeout(gameLoop.bind(this), 62.5);\n\t                drawScreen.call(this);\n\t            }\n\t            gameLoop.call(this);\n\t        }\n\t    }\n\t\n\t    _createClass(Player, [{\n\t        key: 'play',\n\t        value: function play() {\n\t            this.video.play();\n\t            this.song.play();\n\t        }\n\t    }, {\n\t        key: 'pause',\n\t        value: function pause() {\n\t            this.video.pause();\n\t            this.song.pause();\n\t        }\n\t    }]);\n\t\n\t    return Player;\n\t}();\n\t// player.js:45 26.307136\n\t// player.js:45 26.368843\n\t// player.js:45 26.431297\n\t// player.js:45 26.495893\n\t// player.js:45 26.559004\n\t// player.js:45 26.623864\n\t// player.js:45 26.687244\n\t// player.js:45 26.750368\n\t// player.js:45 26.814057\n\t// player.js:45 26.876733\n\t// player.js:45 26.941963\n\t// player.js:45 27.005755\n\t// player.js:45 27.069552\n\t// player.js:45 27.132788\n\t// player.js:45 27.196975\n\t// player.js:45 27.26131\n\t// player.js:45 27.324893\n\t\n\t\n\texports.default = Player;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Song = function () {\n\t    function Song(link) {\n\t        _classCallCheck(this, Song);\n\t\n\t        this.link = link;\n\t        this.audio = new Audio(link);\n\t    }\n\t\n\t    _createClass(Song, [{\n\t        key: \"play\",\n\t        value: function play() {\n\t            this.audio.play();\n\t        }\n\t    }, {\n\t        key: \"pause\",\n\t        value: function pause() {\n\t            this.audio.pause();\n\t        }\n\t    }]);\n\t\n\t    return Song;\n\t}();\n\t\n\texports.default = Song;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _subtitlesParser = __webpack_require__(6);\n\t\n\tvar _subtitlesParser2 = _interopRequireDefault(_subtitlesParser);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// import moment from 'moment';\n\t\n\tvar Subtitles = function () {\n\t    function Subtitles(link) {\n\t        _classCallCheck(this, Subtitles);\n\t\n\t        this.link = link;\n\t        // let data;\n\t        this.data = getFile();\n\t        this.parseData();\n\t        this.index = 0; // индекс текущих субтитров\n\t        this.flag = false; // в видео еще не было субтитров\n\t\n\t        function getFile() {\n\t            var xhr = new XMLHttpRequest();\n\t            xhr.open('GET', link, false);\n\t            xhr.send();\n\t            if (xhr.status === 200) {\n\t                return _subtitlesParser2.default.fromSrt(xhr.response);\n\t            }\n\t        }\n\t    }\n\t\n\t    _createClass(Subtitles, [{\n\t        key: 'parseData',\n\t        value: function parseData() {\n\t            this.data.forEach(function (elem) {\n\t                elem.startTime = countSeconds(elem.startTime);\n\t                elem.endTime = countSeconds(elem.endTime);\n\t            });\n\t\n\t            function countSeconds(time) {\n\t                time = time.replace(/,/g, '.');\n\t                var hours = 60 * time.slice(0, 2);\n\t                var minutes = 60 * (hours + Number(time.slice(3, 5)));\n\t                var seconds = minutes + Number(time.slice(6, 12));\n\t                return seconds;\n\t            }\n\t        }\n\t    }]);\n\t\n\t    return Subtitles;\n\t}();\n\t\n\texports.default = Subtitles;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Video = function () {\n\t    function Video(links, pagePlayer) {\n\t        _classCallCheck(this, Video);\n\t\n\t        // this.link = link;\n\t        this.videoElement = document.createElement('video');\n\t        this.videoElement.setAttribute('crossorigin', 'anonymous');\n\t        this.videoDiv = document.createElement('div');\n\t        pagePlayer.appendChild(this.videoDiv);\n\t        this.videoDiv.appendChild(this.videoElement);\n\t        this.videoDiv.setAttribute('style', 'display:none;');\n\t        this.videoElement.setAttribute('src', links.video);\n\t        this.videoElement.muted = true;\n\t    }\n\t\n\t    _createClass(Video, [{\n\t        key: 'play',\n\t        value: function play() {\n\t            this.videoElement.play();\n\t        }\n\t    }, {\n\t        key: 'pause',\n\t        value: function pause() {\n\t            this.videoElement.pause();\n\t        }\n\t    }]);\n\t\n\t    return Video;\n\t}();\n\t\n\texports.default = Video;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar parser = (function() {\n\t    var pItems = {};\n\t\n\t    /**\n\t     * Converts SubRip subtitles into array of objects\n\t     * [{\n\t     *     id:        `Number of subtitle`\n\t     *     startTime: `Start time of subtitle`\n\t     *     endTime:   `End time of subtitle\n\t     *     text: `Text of subtitle`\n\t     * }]\n\t     *\n\t     * @param  {String}  data SubRip suntitles string\n\t     * @param  {Boolean} ms   Optional: use milliseconds for startTime and endTime\n\t     * @return {Array}  \n\t     */\n\t    pItems.fromSrt = function(data, ms) {\n\t        var useMs = ms ? true : false;\n\t\n\t        data = data.replace(/\\r/g, '');\n\t        var regex = /(\\d+)\\n(\\d{2}:\\d{2}:\\d{2},\\d{3}) --> (\\d{2}:\\d{2}:\\d{2},\\d{3})/g;\n\t        data = data.split(regex);\n\t        data.shift();\n\t\n\t        var items = [];\n\t        for (var i = 0; i < data.length; i += 4) {\n\t            items.push({\n\t                id: data[i].trim(),\n\t                startTime: useMs ? timeMs(data[i + 1].trim()) : data[i + 1].trim(),\n\t                endTime: useMs ? timeMs(data[i + 2].trim()) : data[i + 2].trim(),\n\t                text: data[i + 3].trim()\n\t            });\n\t        }\n\t\n\t        return items;\n\t    };\n\t\n\t    /**\n\t     * Converts Array of objects created by this module to SubRip subtitles\n\t     * @param  {Array}  data\n\t     * @return {String}      SubRip subtitles string\n\t     */\n\t    pItems.toSrt = function(data) {\n\t        if (!data instanceof Array) return '';\n\t        var res = '';\n\t\n\t        for (var i = 0; i < data.length; i++) {\n\t            var s = data[i];\n\t\n\t            if (!isNaN(s.startTime) && !isNaN(s.endTime)) {\n\t                s.startTime = msTime(parseInt(s.startTime, 10));\n\t                s.endTime = msTime(parseInt(s.endTime, 10));\n\t            }\n\t\n\t            res += s.id + '\\r\\n';\n\t            res += s.startTime + ' --> ' + s.endTime + '\\r\\n';\n\t            res += s.text.replace('\\n', '\\r\\n') + '\\r\\n\\r\\n';\n\t        }\n\t\n\t        return res;\n\t    };\n\t\n\t    var timeMs = function(val) {\n\t        var regex = /(\\d+):(\\d{2}):(\\d{2}),(\\d{3})/;\n\t        var parts = regex.exec(val);\n\t\n\t        if (parts === null) {\n\t            return 0;\n\t        }\n\t\n\t        for (var i = 1; i < 5; i++) {\n\t            parts[i] = parseInt(parts[i], 10);\n\t            if (isNaN(parts[i])) parts[i] = 0;\n\t        }\n\t\n\t        // hours + minutes + seconds + ms\n\t        return parts[1] * 3600000 + parts[2] * 60000 + parts[3] * 1000 + parts[4];\n\t    };\n\t\n\t    var msTime = function(val) {\n\t        var measures = [ 3600000, 60000, 1000 ]; \n\t        var time = [];\n\t\n\t        for (var i in measures) {\n\t            var res = (val / measures[i] >> 0).toString();\n\t            \n\t            if (res.length < 2) res = '0' + res;\n\t            val %= measures[i];\n\t            time.push(res);\n\t        }\n\t\n\t        var ms = val.toString();\n\t        if (ms.length < 3) {\n\t            for (i = 0; i <= 3 - ms.length; i++) ms = '0' + ms;\n\t        }\n\t\n\t        return time.join(':') + ',' + ms;\n\t    };\n\t\n\t    return pItems;\n\t})();\n\t\n\t// ignore exports for browser\n\tif (true) {\n\t    module.exports = parser;\n\t}\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** bundle.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 957ed15e5b8d8758f5d7\n **/","// import {calc} from './calc';\nimport App from './app';\n\ndocument.addEventListener('DOMContentLoaded', onDOMContentLoaded);\n\nfunction onDOMContentLoaded() {\n    window.app = new App();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/index.js\n **/","import Player from './player';\n\nexport default class App {\n    constructor() {\n        const crossorigin = 'http://cors.io/?u=';\n        this.form = document.querySelector('.panel__form');\n        this.pageForm = document.querySelector('.page_content_form');\n        this.pagePlayer = document.querySelector('.page_content_player');\n\n        this.links = {\n            video: '',\n            subtitles: '',\n            audio: ''\n        };\n\n        this.form.addEventListener('submit', onFormSubmit.bind(this));\n\n        function onFormSubmit(e) {\n            e.preventDefault();\n\n            this.links.video = crossorigin+this.form.querySelector('[name=\"video\"]').value;\n            this.links.subtitles = crossorigin+this.form.querySelector('[name=\"subtitles\"]').value;\n            this.links.audio = crossorigin+this.form.querySelector('[name=\"audio\"]').value;\n\n\n            this.pagePlayer.classList.remove('page_hidden');\n            this.pageForm.classList.add('page_hidden');\n            this.player = new Player(this.links, this.pagePlayer);\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app.js\n **/","import Song from './song';\nimport Video from './video';\nimport Subtitles from './subtitles';\n\nexport default class Player {\n    constructor(links, pagePlayer) {\n\n        // this.links = links;\n        this.pagePlayer = pagePlayer;\n        this.player = pagePlayer.querySelector('.player');\n        this.playButton = this.player.querySelector('.player__play');\n        this.stopButton = this.player.querySelector('.player__stop');\n        this.video = new Video(links, this.pagePlayer);\n        this.song = new Song(links.audio);\n        this.subtitles = new Subtitles(links.subtitles);\n        // console.log(`${this.video.videoElement.videoWidth}:${this.video.videoElement.videoHeight}`);\n        this.video.videoElement.addEventListener('canplaythrough', () => {\n            initCanvas.call(this, this.video.videoElement.videoWidth, this.video.videoElement.videoHeight);\n        });\n        this.playButton.addEventListener('click', () => {\n            this.play();\n        });\n        this.stopButton.addEventListener('click', () => {\n            this.pause();\n        });\n\n        function initCanvas(videoWidth, videoHeight) {\n            let theCanvas = document.getElementById('canvasOne');\n            let context = theCanvas.getContext('2d');\n            theCanvas.width = videoWidth;\n            theCanvas.height = videoHeight;\n\n            this.play();\n\n            function drawScreen() {\n                // if (this.video.videoElement.paused || this.video.videoElement.ended) {\n                //     return false;\n                // }\n                context.drawImage(this.video.videoElement, 0, 0);\n                checkForSubtitles.call(this);\n                addGrayScale();\n            }\n\n            function checkForSubtitles() {\n                // let conditionLess;\n                // if (this.subtitles.flag) {\n                //     conditionLess = false;\n                // } else {\n                //     conditionLess = this.video.videoElement.currentTime <= this.subtitles.data[this.subtitles.index].endTime;\n                // }\n                // // let conditionLess = this.video.videoElement.currentTime <= this.subtitles.data[this.subtitles.index].endTime;\n                // let conditionMore = this.video.videoElement.currentTime >= this.subtitles.data[this.subtitles.index].startTime;\n                // if (conditionLess && conditionMore) {\n                //     drawSubtitlesPicture();\n                //     this.video.pause();\n                // } else if (conditionLess === false && conditionMore) {\n                //     this.video.play();\n                //     this.subtitles.index++;\n                // }\n                //\n                // console.log(this.subtitles.data[this.subtitles.index].endTime);\n                if (this.video.videoElement.currentTime >= this.subtitles.data[this.subtitles.index].endTime) {\n                    if (!this.subtitles.flag) {\n                        this.video.pause();\n                        timerForSubtitles.call(this, 3000);\n                        this.subtitles.flag = true;\n                    }\n                    drawSubtitlesPicture(this.subtitles.data[this.subtitles.index].text);\n                    // console.log(this.video.videoElement.currentTime);\n                }\n\n            }\n\n            function timerForSubtitles(delay) {\n                setTimeout(() => {\n                    console.log('CHANGE');\n                    this.video.play();\n                    this.subtitles.flag = false;\n                    this.subtitles.index++;\n                }, 3000);\n            }\n\n            function drawSubtitlesPicture(text) {\n                context.fillStyle = '#000000';\n                context.fillRect(0, 0, theCanvas.width, theCanvas.height);\n                context.fillStyle = 'white';\n                context.font = '50px Oranienbaum';\n                context.textBaseline = 'middle';\n                context.textAlign = \"center\";\n                context.fillText(text, theCanvas.width / 2, theCanvas.height / 2);\n            }\n\n            function addGrayScale() {\n                // First, draw it into the backing canvas\n                // Grab the pixel data from the backing canvas\n                let idata = context.getImageData(0, 0, theCanvas.width, theCanvas.height);\n                let data = idata.data;\n                // Loop through the pixels, turning them grayscale\n                for (let i = 0; i < data.length; i += 4) {\n                    let r = data[i];\n                    let g = data[i + 1];\n                    let b = data[i + 2];\n                    let brightness = (3 * r + 4 * g + b) >>> 3;\n                    data[i] = brightness;\n                    data[i + 1] = brightness;\n                    data[i + 2] = brightness;\n                }\n                idata.data.set(data);\n                // Draw the pixels onto the visible canvas\n                context.putImageData(idata, 0, 0);\n                // Start over!// First, draw it into the backing canvas\n\n\n                // Step 5: Apply scratches\n                // if (RandomValue & lt; ScratchValue) {\n                //     // Pick a random spot to show scratches\n                //     float dist = 1.0 / ScratchValue;\n                //     float d = distance(vUv, vec2(RandomValue * dist, RandomValue * dist));\n                //     if (d & lt; 0.4) {\n                //         // Generate the scratch\n                //         float xPeriod = 8.0;\n                //         float yPeriod = 1.0;\n                //         float pi = 3.141592;\n                //         float phase = TimeLapse;\n                //         float turbulence = snoise(vUv * 2.5);\n                //         float vScratch = 0.5 + (sin(((vUv.x * xPeriod + vUv.y * yPeriod + turbulence)) * pi + phase) * 0.5);\n                //         vScratch = clamp((vScratch * 10000.0) + 0.35, 0.0, 1.0);\n                //\n                //         finalColour.xyz *= vScratch;\n                //     }\n                // }\n            }\n\n            function gameLoop() {\n                window.setTimeout(gameLoop.bind(this), 62.5);\n                drawScreen.call(this);\n            }\n            gameLoop.call(this);\n        }\n    }\n\n    play() {\n        this.video.play();\n        this.song.play();\n    }\n    pause() {\n        this.video.pause();\n        this.song.pause();\n    }\n}\n// player.js:45 26.307136\n// player.js:45 26.368843\n// player.js:45 26.431297\n// player.js:45 26.495893\n// player.js:45 26.559004\n// player.js:45 26.623864\n// player.js:45 26.687244\n// player.js:45 26.750368\n// player.js:45 26.814057\n// player.js:45 26.876733\n// player.js:45 26.941963\n// player.js:45 27.005755\n// player.js:45 27.069552\n// player.js:45 27.132788\n// player.js:45 27.196975\n// player.js:45 27.26131\n// player.js:45 27.324893\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/player.js\n **/","export default class Song {\n    constructor(link) {\n        this.link = link;\n        this.audio = new Audio(link);\n    }\n    play() {\n        this.audio.play();\n    }\n    pause() {\n        this.audio.pause();\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/song.js\n **/","import parser from 'subtitles-parser';\n// import moment from 'moment';\n\nexport default class Subtitles {\n    constructor(link) {\n        this.link = link;\n        // let data;\n        this.data = getFile();\n        this.parseData();\n        this.index = 0; // индекс текущих субтитров\n        this.flag = false; // в видео еще не было субтитров\n\n        function getFile() {\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', link, false);\n            xhr.send();\n            if (xhr.status === 200) {\n                return parser.fromSrt(xhr.response);\n            }\n        }\n    }\n    parseData() {\n        this.data.forEach((elem) => {\n            elem.startTime = countSeconds(elem.startTime);\n            elem.endTime = countSeconds(elem.endTime);\n        });\n\n        function countSeconds(time) {\n            time = time.replace(/,/g, '.');\n            let hours = 60 * time.slice(0, 2);\n            let minutes = 60 * (hours + Number(time.slice(3, 5)));\n            let seconds = minutes + Number(time.slice(6, 12));\n            return seconds;\n        }\n\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/subtitles.js\n **/","export default class Video {\n    constructor(links, pagePlayer) {\n        // this.link = link;\n        this.videoElement = document.createElement('video');\n        this.videoElement.setAttribute('crossorigin', 'anonymous');\n        this.videoDiv = document.createElement('div');\n        pagePlayer.appendChild(this.videoDiv);\n        this.videoDiv.appendChild(this.videoElement);\n        this.videoDiv.setAttribute('style', 'display:none;');\n        this.videoElement.setAttribute('src', links.video);\n        this.videoElement.muted = true;\n    }\n    play() {\n        this.videoElement.play();\n    }\n    pause() {\n        this.videoElement.pause();\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/video.js\n **/","var parser = (function() {\n    var pItems = {};\n\n    /**\n     * Converts SubRip subtitles into array of objects\n     * [{\n     *     id:        `Number of subtitle`\n     *     startTime: `Start time of subtitle`\n     *     endTime:   `End time of subtitle\n     *     text: `Text of subtitle`\n     * }]\n     *\n     * @param  {String}  data SubRip suntitles string\n     * @param  {Boolean} ms   Optional: use milliseconds for startTime and endTime\n     * @return {Array}  \n     */\n    pItems.fromSrt = function(data, ms) {\n        var useMs = ms ? true : false;\n\n        data = data.replace(/\\r/g, '');\n        var regex = /(\\d+)\\n(\\d{2}:\\d{2}:\\d{2},\\d{3}) --> (\\d{2}:\\d{2}:\\d{2},\\d{3})/g;\n        data = data.split(regex);\n        data.shift();\n\n        var items = [];\n        for (var i = 0; i < data.length; i += 4) {\n            items.push({\n                id: data[i].trim(),\n                startTime: useMs ? timeMs(data[i + 1].trim()) : data[i + 1].trim(),\n                endTime: useMs ? timeMs(data[i + 2].trim()) : data[i + 2].trim(),\n                text: data[i + 3].trim()\n            });\n        }\n\n        return items;\n    };\n\n    /**\n     * Converts Array of objects created by this module to SubRip subtitles\n     * @param  {Array}  data\n     * @return {String}      SubRip subtitles string\n     */\n    pItems.toSrt = function(data) {\n        if (!data instanceof Array) return '';\n        var res = '';\n\n        for (var i = 0; i < data.length; i++) {\n            var s = data[i];\n\n            if (!isNaN(s.startTime) && !isNaN(s.endTime)) {\n                s.startTime = msTime(parseInt(s.startTime, 10));\n                s.endTime = msTime(parseInt(s.endTime, 10));\n            }\n\n            res += s.id + '\\r\\n';\n            res += s.startTime + ' --> ' + s.endTime + '\\r\\n';\n            res += s.text.replace('\\n', '\\r\\n') + '\\r\\n\\r\\n';\n        }\n\n        return res;\n    };\n\n    var timeMs = function(val) {\n        var regex = /(\\d+):(\\d{2}):(\\d{2}),(\\d{3})/;\n        var parts = regex.exec(val);\n\n        if (parts === null) {\n            return 0;\n        }\n\n        for (var i = 1; i < 5; i++) {\n            parts[i] = parseInt(parts[i], 10);\n            if (isNaN(parts[i])) parts[i] = 0;\n        }\n\n        // hours + minutes + seconds + ms\n        return parts[1] * 3600000 + parts[2] * 60000 + parts[3] * 1000 + parts[4];\n    };\n\n    var msTime = function(val) {\n        var measures = [ 3600000, 60000, 1000 ]; \n        var time = [];\n\n        for (var i in measures) {\n            var res = (val / measures[i] >> 0).toString();\n            \n            if (res.length < 2) res = '0' + res;\n            val %= measures[i];\n            time.push(res);\n        }\n\n        var ms = val.toString();\n        if (ms.length < 3) {\n            for (i = 0; i <= 3 - ms.length; i++) ms = '0' + ms;\n        }\n\n        return time.join(':') + ',' + ms;\n    };\n\n    return pItems;\n})();\n\n// ignore exports for browser\nif (typeof exports === 'object') {\n    module.exports = parser;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/subtitles-parser/index.js\n ** module id = 6\n ** module chunks = 0\n **/"],"sourceRoot":""}